

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pycassa.pool – Connection Pooling &mdash; pycassa v1.0.1 documentation</title>
    <link rel="stylesheet" href="../../static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../static/jquery.js"></script>
    <script type="text/javascript" src="../../static/underscore.js"></script>
    <script type="text/javascript" src="../../static/doctools.js"></script>
    <link rel="top" title="pycassa v1.0.1 documentation" href="../../index.html" />
    <link rel="up" title="API Documentation" href="../index.html" />
    <link rel="next" title="pycassa.columnfamily – Column Family" href="columnfamily.html" />
    <link rel="prev" title="API Documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="columnfamily.html" title="pycassa.columnfamily – Column Family"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="API Documentation"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">pycassa v1.0.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">API Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-pycassa.pool">
<span id="pycassa-pool-connection-pooling"></span><h1><a class="reference internal" href="#module-pycassa.pool" title="pycassa.pool"><tt class="xref py py-mod docutils literal"><span class="pre">pycassa.pool</span></tt></a> &#8211; Connection Pooling<a class="headerlink" href="#module-pycassa.pool" title="Permalink to this headline">¶</a></h1>
<p>Connection pooling for Cassandra connections.</p>
<p>Provides a number of connection pool implementations for a variety of
usage scenarios and thread behavior requirements imposed by the
application.</p>
<dl class="attribute">
<dt id="pycassa.pool.QueuePool">
<tt class="descclassname">pycassa.pool.</tt><tt class="descname">QueuePool</tt><a class="headerlink" href="#pycassa.pool.QueuePool" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#pycassa.pool.ConnectionPool" title="pycassa.pool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a></p>
</dd></dl>

<dl class="class">
<dt id="pycassa.pool.ConnectionPool">
<em class="property">class </em><tt class="descclassname">pycassa.pool.</tt><tt class="descname">ConnectionPool</tt><big>(</big><em>keyspace, server_list=['localhost:9160'], credentials=None, timeout=0.5, use_threadlocal=True, pool_size=5, max_overflow=10, prefill=True, pool_timeout=30, recycle=10000, max_retries=5, listeners=[], logging_name=None, framed_transport=True</em><big>)</big><a class="headerlink" href="#pycassa.pool.ConnectionPool" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a pool that maintains a queue of open connections.</p>
<p>All connections in the pool will be opened to <cite>keyspace</cite>.</p>
<p><cite>server_list</cite> is a sequence of servers in the form &#8216;host:port&#8217; that
the pool will connect to.  The list will be randomly permuted before
being drawn from sequentially. <cite>server_list</cite> may also be a function
that returns the sequence of servers.</p>
<p>If authentication or autorization is required, <cite>credentials</cite> must
be supplied.  This should be a dictionary containing &#8216;username&#8217; and
&#8216;password&#8217; keys with appropriate string values.</p>
<p><cite>timeout</cite> specifies in seconds how long individual connections will 
block before timing out. If set to <tt class="xref docutils literal"><span class="pre">None</span></tt>, connections will never
timeout.</p>
<p>If <cite>use_threadlocal</cite> is set to <tt class="xref docutils literal"><span class="pre">True</span></tt>, repeated calls to
<a class="reference internal" href="#pycassa.pool.ConnectionPool.get" title="pycassa.pool.ConnectionPool.get"><tt class="xref py py-meth docutils literal"><span class="pre">get()</span></tt></a> within the same application thread will
return the same <a class="reference internal" href="#pycassa.pool.ConnectionWrapper" title="pycassa.pool.ConnectionWrapper"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionWrapper</span></tt></a> object if one has
already been retrieved from the pool and has not been returned yet.
Be careful when setting <cite>use_threadlocal</cite> to <tt class="xref docutils literal"><span class="pre">False</span></tt> in a multithreaded
application, especially with retries enabled.  Synchronization may be
required to prevent the connection from changing while another thread is
using it.</p>
<p>The pool will keep up <cite>pool_size</cite> open connections in the pool
at any time.  When a connection is returned to the pool, the
connection will be discarded is the pool already contains <cite>pool_size</cite>
connections.  Whether or not a new connection may be opened when the
pool is empty is controlled by <cite>max_overflow</cite>.  This specifies how many
additional connections may be opened after the pool has reached <cite>pool_size</cite>;
keep in mind that these extra connections will be discarded upon checkin
until the pool is below <cite>pool_size</cite>. It follows then that the total number
of simultaneous connections the pool will allow is <tt class="docutils literal"><span class="pre">pool_size</span> <span class="pre">+</span> <span class="pre">max_overflow</span></tt>,
and the number of &#8220;sleeping&#8221; connections the pool will allow is <tt class="docutils literal"><span class="pre">pool_size</span></tt>.
<cite>max_overflow</cite> may be set to -1 to indicate no overflow limit.</p>
<p>A good choice for <cite>pool_size</cite> is a multiple of the number of servers
passed to the Pool constructor.  If a size less than this is chosen,
the last <tt class="docutils literal"><span class="pre">(len(server_list)</span> <span class="pre">-</span> <span class="pre">pool_size)</span></tt> servers may not be used until
either overflow occurs, a connection is recycled, or a connection
fails. Similarly, if a multiple of <tt class="docutils literal"><span class="pre">len(server_list)</span></tt> is not chosen,
those same servers would have a decreased load.</p>
<p>If <cite>prefill</cite> is set to <tt class="xref docutils literal"><span class="pre">True</span></tt>, <cite>pool_size</cite> connections will be opened
when the pool is created.</p>
<p>If <tt class="docutils literal"><span class="pre">pool_size</span> <span class="pre">+</span> <span class="pre">max_overflow</span></tt> connections have already been checked
out, an attempt to retrieve a new connection from the pool will wait
up to <cite>pool_timeout</cite> seconds for a connection to be returned to the
pool before giving up. This may be set to 0 to fail immediately or -1
to wait forever.</p>
<p>After performing <cite>recycle</cite> number of operations, connections will
be replaced when checked back in to the pool.  This may be set to
-1 to disable connection recycling.</p>
<p>When an operation on a connection fails due to an <tt class="xref py py-exc docutils literal"><span class="pre">TimedOutException</span></tt>
or <tt class="xref py py-exc docutils literal"><span class="pre">UnavailableException</span></tt>, which tend to indicate single or
multiple node failure, the operation will be retried on different nodes
up to <cite>max_retries</cite> times before an <tt class="xref py py-exc docutils literal"><span class="pre">Exception</span></tt> is raised. Setting to
0 disables retries and setting to -1 allows unlimited retries.</p>
<p>Pool monitoring may be achieved by supplying <cite>listeners</cite>, which should
be a list of <a class="reference internal" href="#pycassa.pool.PoolListener" title="pycassa.pool.PoolListener"><tt class="xref py py-class docutils literal"><span class="pre">PoolListener</span></tt></a>-like objects or dictionaries of
callables that receive events when pool or connection events occur.</p>
<p>By default, each pool identifies itself in the logs using <tt class="docutils literal"><span class="pre">id(self)</span></tt>.
If multiple pools are in use for different purposes, setting <cite>logging_name</cite>
will help individual pools to be identified in the logs.</p>
<p><cite>framed_transport</cite> determines whether framed or buffered transport will
be used.  Cassandra 0.7 uses framed by default, while Cassandra 0.6 uses
buffered by default.</p>
<p>Example Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pool</span> <span class="o">=</span> <span class="n">pycassa</span><span class="o">.</span><span class="n">ConnectionPool</span><span class="p">(</span><span class="n">keyspace</span><span class="o">=</span><span class="s">&#39;Keyspace1&#39;</span><span class="p">,</span> <span class="n">server_list</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;10.0.0.4:9160&#39;</span><span class="p">,</span> <span class="s">&#39;10.0.0.5:9160&#39;</span><span class="p">],</span> <span class="n">prefill</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cf</span> <span class="o">=</span> <span class="n">pycassa</span><span class="o">.</span><span class="n">ColumnFamily</span><span class="p">(</span><span class="n">pool</span><span class="p">,</span> <span class="s">&#39;Standard1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cf</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s">&#39;key&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;col&#39;</span><span class="p">:</span> <span class="s">&#39;val&#39;</span><span class="p">})</span>
<span class="go">1287785685530679</span>
</pre></div>
</div>
<dl class="method">
<dt id="pycassa.pool.ConnectionPool.add_listener">
<tt class="descname">add_listener</tt><big>(</big><em>listener</em><big>)</big><a class="headerlink" href="#pycassa.pool.ConnectionPool.add_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <a class="reference internal" href="#pycassa.pool.PoolListener" title="pycassa.pool.PoolListener"><tt class="xref py py-class docutils literal"><span class="pre">PoolListener</span></tt></a>-like object to this pool.</p>
<p><cite>listener</cite> may be an object that implements some or all of
<a class="reference internal" href="#pycassa.pool.PoolListener" title="pycassa.pool.PoolListener"><tt class="xref py py-class docutils literal"><span class="pre">PoolListener</span></tt></a>, or a dictionary of callables containing implementations
of some or all of the named methods in <a class="reference internal" href="#pycassa.pool.PoolListener" title="pycassa.pool.PoolListener"><tt class="xref py py-class docutils literal"><span class="pre">PoolListener</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.ConnectionPool.dispose">
<tt class="descname">dispose</tt><big>(</big><big>)</big><a class="headerlink" href="#pycassa.pool.ConnectionPool.dispose" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes all checked in connections in the pool.</p>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.ConnectionPool.get">
<tt class="descname">get</tt><big>(</big><big>)</big><a class="headerlink" href="#pycassa.pool.ConnectionPool.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a connection from the pool.</p>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.ConnectionPool.recreate">
<tt class="descname">recreate</tt><big>(</big><big>)</big><a class="headerlink" href="#pycassa.pool.ConnectionPool.recreate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new instance with idential creation arguments.</p>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.ConnectionPool.return_conn">
<tt class="descname">return_conn</tt><big>(</big><em>conn</em><big>)</big><a class="headerlink" href="#pycassa.pool.ConnectionPool.return_conn" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a connection to the pool.</p>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.ConnectionPool.status">
<tt class="descname">status</tt><big>(</big><big>)</big><a class="headerlink" href="#pycassa.pool.ConnectionPool.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the status of the pool.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pycassa.pool.PoolListener">
<em class="property">class </em><tt class="descclassname">pycassa.pool.</tt><tt class="descname">PoolListener</tt><a class="headerlink" href="#pycassa.pool.PoolListener" title="Permalink to this definition">¶</a></dt>
<dd><p>Hooks into the lifecycle of connections in a <tt class="xref py py-class docutils literal"><span class="pre">AbstractPool</span></tt>.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyListener</span><span class="p">(</span><span class="n">PoolListener</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">connection_created</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dic</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;perform connect operations&#39;&#39;&#39;</span>
    <span class="c"># etc.</span>

<span class="c"># create a new pool with a listener</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">ConnectionPool</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">listeners</span><span class="o">=</span><span class="p">[</span><span class="n">MyListener</span><span class="p">()])</span>

<span class="c"># or add a listener after the fact</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_listener</span><span class="p">(</span><span class="n">MyListener</span><span class="p">())</span>
</pre></div>
</div>
<p>Listeners receive a dictionary that contains event information and
is indexed by a string describing that piece of info.  For example,
all event dictionaries include &#8216;level&#8217;, so dic[&#8216;level&#8217;] will return
the prescribed logging level.</p>
<p>There is no need to subclass <a class="reference internal" href="#pycassa.pool.PoolListener" title="pycassa.pool.PoolListener"><tt class="xref py py-class docutils literal"><span class="pre">PoolListener</span></tt></a> to handle events.
Any class that implements one or more of these methods can be used
as a pool listener.  The <tt class="xref py py-class docutils literal"><span class="pre">AbstractPool</span></tt> will inspect the methods
provided by a listener object and add the listener to one or more
internal event queues based on its capabilities.  In terms of
efficiency and function call overhead, you&#8217;re much better off only
providing implementations for the hooks you&#8217;ll be using.</p>
<dl class="method">
<dt id="pycassa.pool.PoolListener.connection_checked_in">
<tt class="descname">connection_checked_in</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#pycassa.pool.PoolListener.connection_checked_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a connection returns to the pool.</p>
<p>Note that the connection may be None if the connection has been closed.</p>
<dl class="docutils">
<dt>dic[&#8216;connection&#8217;]</dt>
<dd>The <a class="reference internal" href="#pycassa.pool.ConnectionWrapper" title="pycassa.pool.ConnectionWrapper"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionWrapper</span></tt></a> that persistently manages the connection</dd>
<dt>dic[&#8216;pool_type&#8217;]</dt>
<dd>The type of pool the connection was created in; e.g. <a class="reference internal" href="#pycassa.pool.ConnectionPool" title="pycassa.pool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a></dd>
<dt>dic[&#8216;pool_id&#8217;]</dt>
<dd>The logging name of the connection&#8217;s pool (defaults to id(pool))</dd>
<dt>dic[&#8216;level&#8217;]</dt>
<dd>The prescribed logging level for this event.  Can be &#8216;debug&#8217;, &#8216;info&#8217;,
&#8216;warn&#8217;, &#8216;error&#8217;, or &#8216;critical&#8217;.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.PoolListener.connection_checked_out">
<tt class="descname">connection_checked_out</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#pycassa.pool.PoolListener.connection_checked_out" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a connection is retrieved from the Pool.</p>
<dl class="docutils">
<dt>dic[&#8216;connection&#8217;]</dt>
<dd>The <a class="reference internal" href="#pycassa.pool.ConnectionWrapper" title="pycassa.pool.ConnectionWrapper"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionWrapper</span></tt></a> that persistently manages the connection</dd>
<dt>dic[&#8216;pool_type&#8217;]</dt>
<dd>The type of pool the connection was created in; e.g. <a class="reference internal" href="#pycassa.pool.ConnectionPool" title="pycassa.pool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a></dd>
<dt>dic[&#8216;pool_id&#8217;]</dt>
<dd>The logging name of the connection&#8217;s pool (defaults to id(pool))</dd>
<dt>dic[&#8216;level&#8217;]</dt>
<dd>The prescribed logging level for this event.  Can be &#8216;debug&#8217;, &#8216;info&#8217;,
&#8216;warn&#8217;, &#8216;error&#8217;, or &#8216;critical&#8217;.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.PoolListener.connection_created">
<tt class="descname">connection_created</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#pycassa.pool.PoolListener.connection_created" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once for each new Cassandra connection.</p>
<dl class="docutils">
<dt>dic[&#8216;connection&#8217;]</dt>
<dd>The <a class="reference internal" href="#pycassa.pool.ConnectionWrapper" title="pycassa.pool.ConnectionWrapper"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionWrapper</span></tt></a> that persistently manages the connection</dd>
<dt>dic[&#8216;message&#8217;]</dt>
<dd>A reason for closing the connection, if any.</dd>
<dt>dic[&#8216;error&#8217;]</dt>
<dd>An error that occured while closing the connection, if any.</dd>
<dt>dic[&#8216;pool_type&#8217;]</dt>
<dd>The type of pool the connection was created in; e.g. <a class="reference internal" href="#pycassa.pool.ConnectionPool" title="pycassa.pool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a></dd>
<dt>dic[&#8216;pool_id&#8217;]</dt>
<dd>The logging name of the connection&#8217;s pool (defaults to id(pool))</dd>
<dt>dic[&#8216;level&#8217;]</dt>
<dd>The prescribed logging level for this event.  Can be &#8216;debug&#8217;, &#8216;info&#8217;,
&#8216;warn&#8217;, &#8216;error&#8217;, or &#8216;critical&#8217;.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.PoolListener.connection_disposed">
<tt class="descname">connection_disposed</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#pycassa.pool.PoolListener.connection_disposed" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a connection is closed.</p>
<dl class="docutils">
<dt>dic[&#8216;connection&#8217;]</dt>
<dd>The <a class="reference internal" href="#pycassa.pool.ConnectionWrapper" title="pycassa.pool.ConnectionWrapper"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionWrapper</span></tt></a> that persistently manages the connection</dd>
<dt>dic[&#8216;message&#8217;]</dt>
<dd>A reason for closing the connection, if any.</dd>
<dt>dic[&#8216;error&#8217;]</dt>
<dd>An error that occured while closing the connection, if any.</dd>
<dt>dic[&#8216;pool_type&#8217;]</dt>
<dd>The type of pool the connection was created in; e.g. <a class="reference internal" href="#pycassa.pool.ConnectionPool" title="pycassa.pool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a></dd>
<dt>dic[&#8216;pool_id&#8217;]</dt>
<dd>The logging name of the connection&#8217;s pool (defaults to id(pool))</dd>
<dt>dic[&#8216;level&#8217;]</dt>
<dd>The prescribed logging level for this event.  Can be &#8216;debug&#8217;, &#8216;info&#8217;,
&#8216;warn&#8217;, &#8216;error&#8217;, or &#8216;critical&#8217;.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.PoolListener.connection_failed">
<tt class="descname">connection_failed</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#pycassa.pool.PoolListener.connection_failed" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a connection to a single server fails.</p>
<dl class="docutils">
<dt>dic[&#8216;error&#8217;]</dt>
<dd>The connection error (Exception).</dd>
<dt>dic[&#8216;pool_type&#8217;]</dt>
<dd>The type of pool the connection was created in; e.g. <a class="reference internal" href="#pycassa.pool.ConnectionPool" title="pycassa.pool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a></dd>
<dt>dic[&#8216;pool_id&#8217;]</dt>
<dd>The logging name of the connection&#8217;s pool (defaults to id(pool))</dd>
<dt>dic[&#8216;level&#8217;]</dt>
<dd>The prescribed logging level for this event.  Can be &#8216;debug&#8217;, &#8216;info&#8217;,
&#8216;warn&#8217;, &#8216;error&#8217;, or &#8216;critical&#8217;.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.PoolListener.connection_recycled">
<tt class="descname">connection_recycled</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#pycassa.pool.PoolListener.connection_recycled" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a connection is recycled.</p>
<dl class="docutils">
<dt>dic[&#8216;old_conn&#8217;]</dt>
<dd>The <a class="reference internal" href="#pycassa.pool.ConnectionWrapper" title="pycassa.pool.ConnectionWrapper"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionWrapper</span></tt></a> that is being recycled</dd>
<dt>dic[&#8216;new_conn&#8217;]</dt>
<dd>The <a class="reference internal" href="#pycassa.pool.ConnectionWrapper" title="pycassa.pool.ConnectionWrapper"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionWrapper</span></tt></a> that is replacing it</dd>
<dt>dic[&#8216;pool_type&#8217;]</dt>
<dd>The type of pool the connection was created in; e.g. <a class="reference internal" href="#pycassa.pool.ConnectionPool" title="pycassa.pool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a></dd>
<dt>dic[&#8216;pool_id&#8217;]</dt>
<dd>The logging name of the connection&#8217;s pool (defaults to id(pool))</dd>
<dt>dic[&#8216;level&#8217;]</dt>
<dd>The prescribed logging level for this event.  Can be &#8216;debug&#8217;, &#8216;info&#8217;,
&#8216;warn&#8217;, &#8216;error&#8217;, or &#8216;critical&#8217;.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.PoolListener.pool_at_max">
<tt class="descname">pool_at_max</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#pycassa.pool.PoolListener.pool_at_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when an attempt is made to get a new connection from the
pool, but the pool is already at its max size.</p>
<dl class="docutils">
<dt>dic[&#8216;pool_type&#8217;]</dt>
<dd>The type of pool the connection was created in; e.g. <a class="reference internal" href="#pycassa.pool.ConnectionPool" title="pycassa.pool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a></dd>
<dt>dic[&#8216;pool_id&#8217;]</dt>
<dd>The logging name of the connection&#8217;s pool (defaults to id(pool))</dd>
<dt>dic[&#8216;level&#8217;]</dt>
<dd>The prescribed logging level for this event.  Can be &#8216;debug&#8217;, &#8216;info&#8217;,
&#8216;warn&#8217;, &#8216;error&#8217;, or &#8216;critical&#8217;.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.PoolListener.pool_disposed">
<tt class="descname">pool_disposed</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#pycassa.pool.PoolListener.pool_disposed" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a pool is recreated.</p>
<dl class="docutils">
<dt>dic[&#8216;pool_type&#8217;]</dt>
<dd>The type of pool the connection was created in; e.g. <a class="reference internal" href="#pycassa.pool.ConnectionPool" title="pycassa.pool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a></dd>
<dt>dic[&#8216;pool_id&#8217;]</dt>
<dd>The logging name of the connection&#8217;s pool (defaults to id(pool))</dd>
<dt>dic[&#8216;level&#8217;]</dt>
<dd>The prescribed logging level for this event.  Can be &#8216;debug&#8217;, &#8216;info&#8217;,
&#8216;warn&#8217;, &#8216;error&#8217;, or &#8216;critical&#8217;.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.PoolListener.pool_recreated">
<tt class="descname">pool_recreated</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#pycassa.pool.PoolListener.pool_recreated" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a pool is recreated.</p>
<dl class="docutils">
<dt>dic[&#8216;pool_type&#8217;]</dt>
<dd>The type of pool the connection was created in; e.g. <a class="reference internal" href="#pycassa.pool.ConnectionPool" title="pycassa.pool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a></dd>
<dt>dic[&#8216;pool_id&#8217;]</dt>
<dd>The logging name of the connection&#8217;s pool (defaults to id(pool))</dd>
<dt>dic[&#8216;level&#8217;]</dt>
<dd>The prescribed logging level for this event.  Can be &#8216;debug&#8217;, &#8216;info&#8217;,
&#8216;warn&#8217;, &#8216;error&#8217;, or &#8216;critical&#8217;.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.PoolListener.server_list_obtained">
<tt class="descname">server_list_obtained</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#pycassa.pool.PoolListener.server_list_obtained" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the pool finalizes its server list.</p>
<dl class="docutils">
<dt>dic[&#8216;server_list&#8217;]</dt>
<dd>The randomly permuted list of servers.</dd>
<dt>dic[&#8216;pool_type&#8217;]</dt>
<dd>The type of pool the connection was created in; e.g. <a class="reference internal" href="#pycassa.pool.ConnectionPool" title="pycassa.pool.ConnectionPool"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionPool</span></tt></a></dd>
<dt>dic[&#8216;pool_id&#8217;]</dt>
<dd>The logging name of the connection&#8217;s pool (defaults to id(pool))</dd>
<dt>dic[&#8216;level&#8217;]</dt>
<dd>The prescribed logging level for this event.  Can be &#8216;debug&#8217;, &#8216;info&#8217;,
&#8216;warn&#8217;, &#8216;error&#8217;, or &#8216;critical&#8217;.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pycassa.pool.ConnectionWrapper">
<em class="property">class </em><tt class="descclassname">pycassa.pool.</tt><tt class="descname">ConnectionWrapper</tt><big>(</big><em>pool</em>, <em>max_retries</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pycassa.pool.ConnectionWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a wrapper for a <tt class="xref py py-class docutils literal"><span class="pre">pycassa.connection.Connection</span></tt>
object, adding pooling related functionality while still allowing
access to the thrift API calls.</p>
<p>These should not be created directly, only obtained through
Pool&#8217;s <tt class="xref py py-meth docutils literal"><span class="pre">get()</span></tt> method.</p>
<dl class="method">
<dt id="pycassa.pool.ConnectionWrapper.get_keyspace_description">
<tt class="descname">get_keyspace_description</tt><big>(</big><em>keyspace=None</em>, <em>use_dict_for_col_metadata=False</em><big>)</big><a class="headerlink" href="#pycassa.pool.ConnectionWrapper.get_keyspace_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the given keyspace.</p>
<p>If <cite>use_dict_for_col_metadata</cite> is <tt class="xref docutils literal"><span class="pre">True</span></tt>, the column metadata will be stored
as a dictionary instead of a list</p>
<p>A dictionary of the form <tt class="docutils literal"><span class="pre">{column_family_name:</span> <span class="pre">CfDef}</span></tt> is returned.</p>
</dd></dl>

<dl class="method">
<dt id="pycassa.pool.ConnectionWrapper.return_to_pool">
<tt class="descname">return_to_pool</tt><big>(</big><big>)</big><a class="headerlink" href="#pycassa.pool.ConnectionWrapper.return_to_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns this to the pool.</p>
<p>This has the same effect as calling <tt class="xref py py-meth docutils literal"><span class="pre">AbstractPool.return_conn()</span></tt>
on the wrapper.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="pycassa.pool.AllServersUnavailable">
<em class="property">exception </em><tt class="descclassname">pycassa.pool.</tt><tt class="descname">AllServersUnavailable</tt><a class="headerlink" href="#pycassa.pool.AllServersUnavailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when none of the servers given to a pool can be connected to.</p>
</dd></dl>

<dl class="exception">
<dt id="pycassa.pool.MaximumRetryException">
<em class="property">exception </em><tt class="descclassname">pycassa.pool.</tt><tt class="descname">MaximumRetryException</tt><a class="headerlink" href="#pycassa.pool.MaximumRetryException" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a <a class="reference internal" href="#pycassa.pool.ConnectionWrapper" title="pycassa.pool.ConnectionWrapper"><tt class="xref py py-class docutils literal"><span class="pre">ConnectionWrapper</span></tt></a> has retried the maximum
allowed times before being returned to the pool; note that all of
the retries do not have to be on the same operation.</p>
</dd></dl>

<dl class="exception">
<dt id="pycassa.pool.NoConnectionAvailable">
<em class="property">exception </em><tt class="descclassname">pycassa.pool.</tt><tt class="descname">NoConnectionAvailable</tt><a class="headerlink" href="#pycassa.pool.NoConnectionAvailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when there are no connections left in a pool.</p>
</dd></dl>

<dl class="exception">
<dt id="pycassa.pool.InvalidRequestError">
<em class="property">exception </em><tt class="descclassname">pycassa.pool.</tt><tt class="descname">InvalidRequestError</tt><a class="headerlink" href="#pycassa.pool.InvalidRequestError" title="Permalink to this definition">¶</a></dt>
<dd><p>Pycassa was asked to do something it can&#8217;t do.</p>
<p>This error generally corresponds to runtime state errors.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../index.html"
                        title="previous chapter">API Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="columnfamily.html"
                        title="next chapter"><tt class="docutils literal docutils literal docutils literal"><span class="pre">pycassa.columnfamily</span></tt> &#8211; Column Family</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../sources/api/pycassa/pool.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="columnfamily.html" title="pycassa.columnfamily – Column Family"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="API Documentation"
             >previous</a> |</li>
        <li><a href="../../index.html">pycassa v1.0.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" >API Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.3.
    </div>
  </body>
</html>